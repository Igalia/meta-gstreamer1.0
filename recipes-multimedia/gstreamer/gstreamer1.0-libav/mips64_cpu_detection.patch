From 3b7fb28b8e8bbabc93757add859a60ead7d8ff32 Mon Sep 17 00:00:00 2001
From: Khem Raj <raj.khem@gmail.com>
Date: Tue, 20 Dec 2016 00:47:01 -0800
Subject: [PATCH] gstreamer1.0-libav: Fix build on mips64

It will add -mips64r6 and -mips64r2 to cmdline which will
cause conflicts

in OE we user mips32r2 and mips64r2 for mips arch versions
so there is no benefit of detecting it automatically by
poking at tools especially in cross env

Fixes errors like

linking -mnan=2008 module with previous -mnan=legacy modules
failed to merge target specific data of file

-Khem
Upstream-Status: Inappropriate [OE-Specific]

---
 gst-libs/ext/libav/configure | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/gst-libs/ext/libav/configure b/gst-libs/ext/libav/configure
index 74059fb..e47be62 100755
--- a/gst-libs/ext/libav/configure
+++ b/gst-libs/ext/libav/configure
@@ -5650,12 +5650,9 @@ elif enabled mips; then
 
     # Enable minimum ISA based on selected options
     if enabled mips64; then
-        enabled mips64r6 && check_inline_asm_flags mips64r6 '"dlsa $0, $0, $0, 1"' '-mips64r6'
         enabled mips64r2 && check_inline_asm_flags mips64r2 '"dext $0, $0, 0, 1"' '-mips64r2'
         disabled mips64r6 && disabled mips64r2 && check_inline_asm_flags mips64r1 '"daddi $0, $0, 0"' '-mips64'
     else
-        enabled mips32r6 && check_inline_asm_flags mips32r6 '"aui $0, $0, 0"' '-mips32r6'
-        enabled mips32r5 && check_inline_asm_flags mips32r5 '"eretnc"' '-mips32r5'
         enabled mips32r2 && check_inline_asm_flags mips32r2 '"ext $0, $0, 0, 1"' '-mips32r2'
         disabled mips32r6 && disabled mips32r5 && disabled mips32r2 && check_inline_asm_flags mips32r1 '"addi $0, $0, 0"' '-mips32'
     fi
